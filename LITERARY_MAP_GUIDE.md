# 📚 苏格兰文学地图 - 使用指南

## ✨ 新版本特色

已创建**复古文学风格**的完整版本：**[literary-map.html](literary-map.html)**

### 🎨 视觉特色

#### 1. 复古字体系统
- **标题字体**: Playfair Display - 优雅的衬线字体
- **正文字体**: EB Garamond, Crimson Text - 经典阅读体验
- **装饰字体**: Italiana - 意大利风格装饰
- **手写风格**: 模拟19世纪手稿

#### 2. 羊皮纸质感
- **主背景**: 仿羊皮纸纹理 (#F4ECD8)
- **陈旧纸张**: 做旧效果 (#E8DCC4)
- **墨水色调**: 深棕和墨黑
- **金色装饰**: 复古金色点缀 (#D4AF37)

#### 3. 手绘地图元素
- **复古边框**: 双线装饰边框
- **装饰花纹**: ❦ 符号装饰
- **手绘标记**: 圆形带边框的复古标记
- **书籍装帧**: 3D书脊效果

---

## 🏠 首页设计

### 核心特点

#### 双卡片布局
1. **发现附近文学地点**
   - 罗盘图标装饰
   - 实时统计数据
   - 快速统计：1,500+ 地点，200+ 作品

2. **虚拟书架**
   - 书籍图标装饰
   - 3D微型书籍预览
   - 三本特色书籍展示

### 视觉元素
- 华丽的装饰线条
- 大号首字母装饰 (Decorative Initial)
- 意大利风格副标题
- 时代背景引语

---

## 🗺️ 地图页面

### 地点分类（颜色区分）

| 类型 | 颜色 | 提及次数 | 视觉特征 |
|------|------|----------|---------|
| 高频打卡点 | 🔴 酒红色 | 50+ | 大圆圈，深色 |
| 常见地点 | 🟤 棕褐色 | 10-50 | 中等圆圈 |
| 偶见地点 | 🟢 森林绿 | 1-10 | 小圆圈 |

### 地图功能

#### 基础功能
- ✅ 交互式地图（基于 Leaflet.js）
- ✅ 缩放和拖动
- ✅ 点击标记查看详情
- ✅ 弹窗显示：
  - 地点名称
  - 提及次数
  - 相关作品数
  - 提及示例（最多2个）

#### 高级功能
- 🔄 **聚合模式** - 标记聚合显示
- 🔥 **高频筛选** - 只显示50+次提及的地点
- 🔍 **地点搜索** - 快速定位地点
- 📊 **实时统计** - 可见地点和作品数

#### 筛选系统
1. **作者筛选** - 下拉选择作者
2. **年代筛选** - 时间轴滑块（1850-1900）
3. **类型筛选** - 点击标签筛选文学类型

---

## 📖 虚拟书架

### 书架视图

#### 木质书架设计
- 深棕色木纹背景
- 立体阴影效果
- 最多显示20本书
- 随机书籍颜色

#### 书籍3D效果
- **书脊**: 暗色阴影
- **封面**: 渐变色彩
- **悬停**: 书籍上升动画
- **点击**: 打开阅读器

### 时间线视图
- 按年代排列作品
- 时间轴可视化
- 历史事件标注

---

## 📚 沉浸式阅读器

### 功能特色

#### 1. 书籍封面
- 华丽的装饰线条
- 大号标题
- 作者和年份信息
- 复古装饰花纹

#### 2. 翻页体验
- **双页展示**: 左右页同时显示
- **装订线**: 中间装订线效果
- **页码**: 左下和右下页码
- **翻页动画**: 3D旋转效果

#### 3. 翻页音效
- 真实的翻书声
- 每次翻页自动播放
- 可以静音

#### 4. 地点高亮
- 书中地点自动高亮
- 黄色背景 + 红色虚线下划线
- 悬停显示地点信息
- 点击跳转到地图

#### 5. 阅读控制
- **上一页** / **下一页** 按钮
- 页码指示器
- **关闭按钮** (右上角)

### 高亮地点列表
- 右侧浮动面板
- 显示本页所有提及地点
- 点击查看地点详情

---

## 🎓 双模式系统

### 游客模式 (Tourist Mode)

**特点**: 简洁、直观、娱乐性强

#### 界面元素
- 大号视觉元素
- 简化的导航
- 强调探索和发现
- 隐藏复杂数据

#### 适合人群
- 普通游客
- 文学爱好者
- 旅游规划者
- 学生（中小学）

#### 核心功能
- 地图探索
- 书籍阅读
- 简单筛选

---

### 学者模式 (Scholar Mode)

**特点**: 专业、详细、数据丰富

#### 额外功能

##### 1. 数据分析面板
- 📊 可视化图表
- 📈 统计数据
- 🔬 深度分析

##### 2. 引用生成
- 自动生成学术引用
- 多种引用格式
- 一键复制

##### 3. 数据导出
- 📄 导出 CSV
- 📊 导出 Excel
- 📕 导出 PDF

#### 适合人群
- 学术研究者
- 大学师生
- 文化机构
- 数据分析师

#### 学者面板位置
- 右下角浮动面板
- 三个标签页：
  1. **数据分析** - Chart.js 图表
  2. **引用** - 学术引用文本
  3. **导出** - 多格式导出

---

## 📊 完整数据集成

### 4个CSV数据源

#### 1. documents_genre.csv
- **作用**: 文学作品主数据
- **字段**:
  - document_id
  - title
  - forename, surname
  - pubyear
  - gender
  - genre

#### 2. locations.csv
- **作用**: 地点坐标
- **字段**:
  - id
  - text (地点名)
  - lat, lon (经纬度)

#### 3. locationmentions.csv
- **作用**: 地点提及记录
- **字段**:
  - id
  - text
  - document_id
  - location_id
  - sentence_id

#### 4. sentences.csv (可选)
- **作用**: 完整句子文本
- **字段**:
  - id
  - identifier
  - text

### 数据处理流程

```javascript
1. 加载所有CSV文件
   ↓
2. 解析和验证数据
   ↓
3. 按document_id合并genres
   ↓
4. 计算地点提及统计
   ↓
5. 生成可视化数据
   ↓
6. 渲染UI界面
```

---

## 🚀 使用方法

### 1. 启动服务器

```bash
cd "c:\Users\suxin\Desktop\Litlong"
python -m http.server 8000
```

### 2. 访问页面

```
http://localhost:8000/literary-map.html
```

### 3. 切换模式

点击右上角的模式切换按钮：
- 🗺️ **游客模式** - 简洁体验
- 🎓 **学者模式** - 专业分析

### 4. 探索功能

#### 从首页开始
1. 查看两大核心功能介绍
2. 点击"开始探索"进入地图
3. 点击"进入书架"查看书籍

#### 地图探索
1. 使用鼠标缩放地图
2. 点击标记查看地点详情
3. 使用筛选面板精确查找
4. 点击"高频地点"查看热门地点

#### 阅读书籍
1. 书架视图选择书籍
2. 点击书籍打开阅读器
3. 使用翻页按钮阅读
4. 查看高亮的地点
5. 点击地点跳转到地图

---

## 🎨 自定义样式

### 修改配色

编辑 [literary-styles.css](literary-styles.css) 的 CSS 变量：

```css
:root {
    --parchment: #F4ECD8;      /* 羊皮纸背景 */
    --ink-dark: #2C1810;       /* 深墨色 */
    --burgundy: #800020;       /* 酒红色 */
    --gold: #D4AF37;           /* 金色装饰 */
}
```

### 修改字体

替换 Google Fonts 链接：

```html
<link href="https://fonts.googleapis.com/css2?family=..." rel="stylesheet">
```

---

## 📱 响应式设计

### 断点

- **Desktop**: > 1200px
- **Tablet**: 768px - 1200px
- **Mobile**: < 768px

### 移动端优化

- 单列布局
- 更大的点击区域
- 简化的导航
- 优化的触摸手势

---

## 🔧 技术栈

### 前端
- **HTML5** - 语义化结构
- **CSS3** - 复古样式系统
- **Vanilla JavaScript** - 无框架

### 第三方库
- **Leaflet.js 1.9.4** - 地图
- **Leaflet.markercluster** - 标记聚合
- **Chart.js 4.4.0** - 数据可视化
- **Font Awesome 6.4.0** - 图标
- **Google Fonts** - 复古字体

### 数据
- **CSV 解析** - 自定义解析器
- **LocalStorage** - 用户偏好
- **动态统计** - 实时计算

---

## 🎯 核心功能清单

### ✅ 已实现

1. **首页**
   - ✅ 复古视觉设计
   - ✅ 两大核心功能卡片
   - ✅ 实时统计数据
   - ✅ 微型书籍预览

2. **地图页面**
   - ✅ 交互式地图
   - ✅ 三色标记系统
   - ✅ 弹窗详情
   - ✅ 多维度筛选
   - ✅ 高频地点过滤

3. **书架页面**
   - ✅ 3D书架视图
   - ✅ 时间线视图
   - ✅ 20本书籍展示

4. **阅读器**
   - ✅ 双页展示
   - ✅ 翻页动画
   - ✅ 翻书音效
   - ✅ 地点高亮
   - ✅ 阅读控制

5. **双模式**
   - ✅ 游客模式界面
   - ✅ 学者模式面板
   - ✅ 一键切换

6. **数据集成**
   - ✅ 4个CSV数据源
   - ✅ 自动统计
   - ✅ 数据关联

---

## 📈 性能优化

### 已优化
- 延迟加载地图
- 按需渲染书籍
- 缓存解析数据
- 优化CSS选择器

### 建议优化
- 使用 Web Workers 处理大数据
- 实现虚拟滚动
- 图片懒加载
- Service Worker 离线支持

---

## 🐛 已知限制

1. **句子数据** - sentences.csv 太大(21MB)，暂未完全集成
2. **地点高亮** - 需要sentences数据才能完整实现
3. **音效** - 使用简单的base64音频，质量有限
4. **标记聚合** - 需要完整配置 Leaflet.markercluster

---

## 🔜 未来扩展

### 建议新功能

1. **AR增强现实** - 实地导览
2. **语音导读** - 朗读书籍内容
3. **用户笔记** - 添加阅读笔记
4. **社交分享** - 分享到社交媒体
5. **路线规划** - 生成旅游路线
6. **多语言** - 英文/中文切换

---

## 📝 文件清单

### 核心文件
- ✅ [literary-map.html](literary-map.html) - 主页面
- ✅ [literary-styles.css](literary-styles.css) - 复古样式
- ✅ [literary-app.js](literary-app.js) - 完整功能

### 数据文件
- ✅ documents_genre.csv
- ✅ locations.csv
- ✅ locationmentions.csv
- ⏸️ sentences.csv (可选)

### 文档
- ✅ [LITERARY_MAP_GUIDE.md](LITERARY_MAP_GUIDE.md) - 本文件

---

## 💡 使用技巧

### 游客模式
1. 从首页开始，慢慢探索
2. 先看地图，了解地理分布
3. 点击感兴趣的地点
4. 进入书架阅读相关作品

### 学者模式
1. 切换到学者模式
2. 使用详细筛选功能
3. 查看数据分析图表
4. 导出数据进行研究
5. 复制学术引用

---

**创建时间**: 2025-12-07
**版本**: 3.0 (Literary Edition)
**状态**: ✅ 完整可用

**特别说明**: 这是一个充满文学气息的复古设计版本，完美融合了19世纪苏格兰文学的优雅与现代Web技术的强大。
